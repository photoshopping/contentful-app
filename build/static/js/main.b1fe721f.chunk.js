(this["webpackJsonpcontentful-ingredients-field-app"]=this["webpackJsonpcontentful-ingredients-field-app"]||[]).push([[0],{114:function(e,t,n){},375:function(e,t,n){"use strict";n.r(t);var c=n(12),i=n(0),r=n(15),a=n(46),s=(n(112),n(113),n(114),n(32)),o=n(49),d=n(18),l=n(13),u=n(380),j=n(31),f=function(e){var t=e.sdk.field.getValue(),n=t?t.map((function(e){return Object(d.a)(Object(d.a)({},e),{},{key:Object(u.a)()})})):[],r=Object(i.useState)(n),a=Object(o.a)(r,2),f=a[0],b=a[1],p=e.sdk.parameters.instance,O=p.referenceKey||"id",x=p.textKey||"text",h=p.textLabel||"Text",v=p.contentTypes?p.contentTypes.split(/\s*,\s*/g):null;Object(i.useEffect)((function(){e.sdk.window.startAutoResizer()})),Object(i.useEffect)((function(){if(f.filter((function(e){return!e.name})).length){var t=f.map((function(e){return e[O]}));e.sdk.space.getEntries({"sys.id[in]":t}).then((function(e){var t=f.map((function(t){var n=e.items.filter((function(e){return e.sys.id===t[O]})).pop();return Object(d.a)({name:n?n.fields.title["en-US"]:""},t)}));b(t)}))}}),[f,e.sdk.space,O]),Object(i.useEffect)((function(){var t=f.map((function(e){var t={};return t[x]=e[x],t[O]=e[O],t}));e.sdk.field.setValue(t)}),[f,e.sdk.field,O,x]);var g=function(e){var t=e.target.dataset.index,n=Object(s.a)(f);n[t][x]=e.target.value,b(n)};return Object(c.jsxs)("section",{children:[Object(c.jsx)("div",{children:Object(c.jsx)(j.a,{onDragEnd:function(e){return function(e){if(e.destination){var t=e.source,n=e.destination;b((function(e){var c=Array.from(e),i=c.splice(t.index,1),r=Object(o.a)(i,1)[0];return c.splice(n.index,0,r),c}))}}(e)},children:Object(c.jsx)(j.c,{droppableId:"rows",children:function(e){return Object(c.jsxs)("div",{ref:e.innerRef,className:"rows",children:[f.map((function(e,t){return Object(c.jsx)(j.b,{draggableId:"".concat(e.id,"-").concat(t),index:t,children:function(n){return Object(c.jsx)("div",Object(d.a)(Object(d.a)(Object(d.a)({},n.draggableProps),n.dragHandleProps),{},{ref:n.innerRef,style:Object(d.a)({userSelect:"none"},n.draggableProps.style),children:Object(c.jsxs)(l.Card,{className:"row",children:[Object(c.jsx)("div",{children:Object(c.jsx)(l.TextInput,{value:e[x],placeholder:h,"data-index":t,onChange:g})}),Object(c.jsx)("div",{style:{width:"200px"},children:e.name?Object(c.jsx)(l.Paragraph,{children:e.name}):Object(c.jsx)(l.SkeletonContainer,{svgHeight:"20",children:Object(c.jsx)(l.SkeletonBodyText,{numberOfLines:"1"})})}),Object(c.jsx)("div",{className:"delete",children:Object(c.jsx)(l.EditorToolbarButton,{icon:"Delete","data-index":t,onClick:function(){return function(e){var t=f.filter((function(t){return t!==e}));b(t)}(e)}})})]})}),e.key)}},"".concat(e.id,"-").concat(t))})),e.placeholder]})}})})}),Object(c.jsx)("div",{style:{marginTop:"10px",marginBottom:"10px"},children:Object(c.jsx)(l.Button,{icon:"Plus",buttonType:"naked",onClick:function(){var t={};v&&(t.contentTypes=v),e.sdk.dialogs.selectMultipleEntries(t).then((function(e){b([].concat(Object(s.a)(f),Object(s.a)(e.map((function(e){var t={key:Object(u.a)()};return t[x]="",t[O]=e.sys.id,t})))))})).catch((function(){}))},children:"Add"})})]})};Object(a.init)((function(e){var t=document.getElementById("root");[{location:a.locations.LOCATION_ENTRY_FIELD,component:Object(c.jsx)(f,{sdk:e})}].forEach((function(n){e.location.is(n.location)&&Object(r.render)(n.component,t)}))}))}},[[375,1,2]]]);
//# sourceMappingURL=main.b1fe721f.chunk.js.map